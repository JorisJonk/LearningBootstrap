<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Bootstrap 101 Template</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <link href="mystyle.css" rel="stylesheet" type="text/css">
    <SCRIPT LANGUAGE="JavaScript">
        var newarray = ['', '', '', '', '', ''];
        console.log("array created");

        function addchattoarray(messagesent) {
            newarray.push(messagesent);
            console.log("message added to array");


            var para = document.createElement("p");
            para.className = 'showchat';
            var node = document.createTextNode(messagesent);
            para.appendChild(node);

            var element = document.getElementById("chatlog");
            element.appendChild(para);
            chatlog.scrollTop = chatlog.scrollHeight;
        };

        function myFunction(form) {
            messagesent = form.inputbox.value;
            conn.send(messagesent);
            addchattoarray(messagesent);
            showlastsix();

        };

        function myFunction2(form) {
            messagesent = form.inputtext.value;
            conn.send(messagesent);
            addchattoarray(messagesent);
            showlastsix();

        };

        function byObserver() {
            return false;
        };

        function showlastsix() {

        };

        function erasetextbox() {
            var showtextballoon = document.getElementById("t2");
            showtextballoon.style.visibility = "hidden";

        };

        function disablebutton() {
            document.getElementById("b1").disabled = true;
            console.log("disabledbuttonb1");
        };
    </script>
</head>

<body>

    <div class="container">
        <div class="containerx0">
            <img src="basicimages/forumappuser_bar.png" alt="ForumApp" ;>


            <div class="box">
                <div class="containerx1">
                    <form>
                        <input type="text" id="namesession" placeholder="Enter session..." />
                        <button>ok</button>
                    </form>
                </div>
                <div class="boxed">
                    <div id="chatlog" class="sizedright">

                    </div>
                    <div class="incbox">

                        <div id="t1" class="inputballoon1">
                            <form id="inputform" onsubmit="return byObserver();"> <input type="text" name="inputbox" placeholder="Enter reply..." VALUE=""></input>
                                <button onclick="myFunction(inputform);">ok</button>
                            </form>
                        </div>

                        <div id="t2" class="inputballoon1">
                            <form id="inputform2" onsubmit="return byObserver();"> <input type="text" name="inputtext" placeholder="Enter question..." VALUE=""></input>
                                <button onclick="myFunction2(inputform2); erasetextbox(); disablebutton();">ok</button>
                            </form>
                        </div>




                        <div id="a2" class="textballoon1"></div>


                        <div id="b1" class="roundbutton1">
                            <img src="basicimages/forumappuser_qm.png" onclick="showtextbox2()">
                        </div>
                        <div class="roundbutton2">
                            <img src="basicimages/forumappuser_!.png" onclick="showtextbox()">
                        </div>
                    </div>
                </div>
            </div>



            <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
            <!-- Include all compiled plugins (below), or include individual files as needed -->
            <script src="js/bootstrap.min.js"></script>
            <script>
                var conn = new WebSocket('ws://localhost:8080');

                conn.onopen = function(e) {
                    console.log("Connection established!");
                    document.getElementById("cm1").innerHTML = newarray[0];
                };

                conn.onmessage = function(e) {
                    message = e.data;
                    console.log(e.data);
                    addchattoarray(message);
                    showlastsix();

                };

                function showownmessage(form) {
                    var TestVar = "asdasd";
                    document.getElementById("cm1").innerHTML = TestVar;

                };

                function showsix() {
                    document.getElementById("cm1").innerHTML = newarray[0];
                    document.getElementById("cm2").innerHTML = newarray[1];
                    document.getElementById("cm3").innerHTML = newarray[2];
                    document.getElementById("cm4").innerHTML = newarray[3];
                    document.getElementById("cm5").innerHTML = newarray[4];
                    document.getElementById("cm6").innerHTML = newarray[5];
                };


                function showarray(array) {
                    document.getElementById("a3").innerHTML = array.toString();
                };




                function showtextbox() {
                    var showtextballoon = document.getElementById("t1");
                    showtextballoon.style.visibility = "visible";

                };

                function showtextbox2() {
                    var showtextballoon2 = document.getElementById("t2");
                    showtextballoon2.style.visibility = "visible";
                };
            </script>



</body>

</html>
